<?
 /***********************************************************************************
 *** 프로 젝트 : CyPress
 *** 개발 영역 : 프리셋 유효성 검사
 *** 개  발  자 : 김성진
 *** 개발 날짜 : 2016.09.27
 ***********************************************************************************/

/***********************************************************************************
 *** 기본 인클루드
 ***********************************************************************************/

$curDirectory = dirname(__FILE__);
require_once $curDirectory."/config/set/webinfo/init.php";
require_once $curDirectory."/config/lib/local/include.php";


/***********************************************************************************
 *** 리퀘스트
 ***********************************************************************************/

$PRC  = $CCommon->STags($CRequest->GetValue("PRC"));    // 프리셋 카테고리 이름
$PRN  = $CCommon->STags($CRequest->GetValue("PRN"));    // 프리셋 이름


/***********************************************************************************
 *** 변수값 유무 체크
 ***********************************************************************************/

if (strlen($PRC) <= 0) {
    echo "Res="._CYP_PRES_NUM_ERR_CD_01."&"._CYP_PRES_NUM_ERR_DC_01;
    exit;
}

if (strlen($PRN) <= 0) {
    echo "Res="._CYP_PRES_NUM_ERR_CD_02."&"._CYP_PRES_NUM_ERR_DC_02;
    exit;
}


/***********************************************************************************
*** 변수선언
***********************************************************************************/

$rData['prc'] = $PRC;           // 프리셋 카테고리 이름
$rData['prn'] = $PRN;           // 프리셋 이름


/***********************************************************************************
 *** 모듈 인클루드
 ***********************************************************************************/

require_once _MOD_DIR."/mod_preset.php";
$CPreset = new CLS_Preset;


/***********************************************************************************
 *** 기존 판형 체크
 **********************************************************************************/

$getRes = $CPreset->getPresetInfoDataValue(_DB_SERVER, $rData);


/***********************************************************************************
 *** 데이터 존재유무에 따라 삽입 또는 업데이트
 **********************************************************************************/

if ($getRes == "UPDATE") {
    $nRes = _CYP_SUCCESS;
} else if ($getRes == "INSERT") {
    $nRes = _CYP_PRES_NUM_ERR_CD_02."&"._CYP_PRES_NUM_ERR_DC_02;
} else {
    $nRes = _CYP_COMM_ERR_CD_01."&"._CYP_COMM_ERR_DC_01;
}


/***********************************************************************************
 *** 출력
 ***********************************************************************************/

echo "Res=".$nRes."\n";

?>