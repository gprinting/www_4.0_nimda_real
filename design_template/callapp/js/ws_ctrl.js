function InitialSocket(){var e=g_callInfo.ACDSvr,t=g_callInfo.ACDPort;g_callInfo.webSck||(g_callInfo.webSck=new WebSocket("ws://"+e+":"+t)),DebugMessage("ws://"+e+":"+t),g_callInfo.webSck.onopen=function(e){ServerConnected(e)},g_callInfo.webSck.onclose=function(e){ServerDisconnect(e)},g_callInfo.webSck.onmessage=function(e){ReceiveMessage(e)},g_callInfo.webSck.onerror=function(e){SocketError(e)}}function ServerConnected(e){DebugMessage("ServerConnected"),g_callInfo.ConnFlag=!0,g_callInfo.LoginError=0,"function"==typeof EventServerConnected&&EventServerConnected(),g_callInfo.autoConnect&&(DebugMessage("자동로그인시도"),g_callInfo.autoConnect=!1,LoginInit(g_callInfo.uGroup,g_callInfo.uPhoneIP,g_callInfo.uPhoneID,g_callInfo.uPhonePWD,g_callInfo.uPhoneExt,g_callInfo.uPWD,g_callInfo.uID))}function ServerDisconnect(e){DebugMessage("ServerDisconnect",e),g_callInfo.ConnFlag=!1,g_callInfo.webSck=null,g_callInfo.LoginResult=-1,"login duplicated"==e.reason?(g_callInfo.NormalClose=!0,g_callInfo.DestroyFlag=!0,setTimeout(function(){g_callInfo.webSck=null},300),"function"==typeof EventLoginDuplicated&&EventLoginDuplicated()):"function"==typeof EventServerDisconnected&&EventServerDisconnected(),g_callInfo.NormalClose||(g_callInfo.LoginError++,g_callInfo.LoginError>=3?("function"==typeof EventServerDisconnected&&EventServerDisconnected(),g_callInfo.NormalClose=!0,g_callInfo.DestroyFlag=!0):setTimeout(function(){InitialSocket()},1e3))}function DestroySocket(){g_callInfo.NormalClose=!0,g_callInfo.DestroyFlag=!0,g_callInfo.LoginResult=-1;try{g_callInfo.webSck.close()}catch(e){}finally{setTimeout(function(){g_callInfo.webSck=null},300)}}function SocketError(e){}function getSendDataWebSocketForGetLineInfo(){var e=JSON.stringify({method:"GetLineInfo",site:g_callInfo.uGroup});return e}function getSendDataWebSocketForReloadAgent(){var e=JSON.stringify({method:"ReloadAgent",site:g_callInfo.uGroup,data:{}});return e}function e3decrypt(e){return e}function e3encrypt(e){return e}function SendEvent(e){"function"==typeof SocketEvent&&setTimeout(function(){SocketEvent(e)},100)}function ReceiveMessage(e){var t,n,o,l,a,r,i,c,g,s=e3decrypt(e.data);try{var u=JSON.parse(s);DebugMessage(u)}catch(f){return void DebugMessage(" \n",s)}if(t=u.method,u.isACK)return void DebugMessage("ACK Received");switch(t){case"Login":if(g_callInfo.WaitResponse.Responsed=!0,g_callInfo.LoginResult=1,n=u.data,i=u.result,1==i){EventLoginSuccess(),KeepConnect();try{for(g=0;g<n.length;g++)a=n[g].AgentState,$("#lblPhoneState").text(a)}catch(f){}setTimeout(function(){var e=getSendDataWebSocketForGetLineInfo();SendDataBySocket(e)},500)}else g_callInfo.NormalClose=!0,g_callInfo.DestroyFlag=!0,g_callInfo.webSck.close(),"function"==typeof EventLoginFailed&&EventLoginFailed(),setTimeout(function(){g_callInfo.webSck=null},300);break;case"CustomerInfo":if(n=u.data,4!=parseInt(g_callInfo.agentState,10)){for(g=0;g<n.length;g++){n[g].call_id,n[g].cid,n[g].site}null!==objTimerSetReady&&clearInterval(objTimerSetReady),objTimerSetReady=setTimeout(function(){300==parseInt(g_callInfo.agentState,10)&&g_callInfo.setAgentState(300),3==parseInt(g_callInfo.agentState,10)&&g_callInfo.setAgentState(3)},4e3)}break;case"PhoneStatusChanged":for(n=u.data,g=0;g<n.length;g++){l=n[g].uPhoneExt,o=n[g].uMethod,a=n[g].AgentState,r=n[g].CallState,0==n[g].Status&&(a=1);var I=n[g].uName,h=n[g].isDND,S=new Date(n[g].StateChangeTime);if(g_callInfo.AgentListArr){for(var _=!1,C=0;C<g_callInfo.AgentListArr.length;C++)g_callInfo.AgentListArr[C].phoneExt==l&&(_=!0,g_callInfo.AgentListArr[C].phoneState=o,g_callInfo.AgentListArr[C].agentState=a,g_callInfo.AgentListArr[C].callState=r,g_callInfo.AgentListArr[C].StateChangeTime=S);0==_&&g_callInfo.AgentListArr.push({phoneExt:l,phoneState:o,agentState:a,callState:r,agentName:I,StateChangeTime:S})}if(e3decrypt(g_callInfo.uPhoneExt)==l){if(AgentStatusChange(o,h,a,r),1==r){g_callInfo.IncommingCallInfo=new IncommingCallData,g_callInfo.IncommingCallInfo.strRemote=n[g].remote,g_callInfo.IncommingCallInfo.strCid=n[g].call_id,g_callInfo.IncommingCallInfo.strRemote=g_callInfo.IncommingCallInfo.strRemote.replace("sip:","");var d=g_callInfo.IncommingCallInfo.strRemote.indexOf("@");d>1&&(g_callInfo.IncommingCallInfo.strRemote=g_callInfo.IncommingCallInfo.strRemote.substr(0,d));var m="";m=g_callInfo.IncommingCallInfo.strRemote,"70"==m.substr(0,2)&&m.length>6&&(m="0"+m),"0"!=m.substr(0,1)&&m.length>6&&(m="0"+m),g_callInfo.IncommingCallInfo.strRemote=m,g_callInfo.CurrCallType=0,g_callInfo.CurrentCID=n[g].call_id,g_callInfo.RemoteNumber=m,g_callInfo.CurrentDNName="","function"==typeof EventCallIncome&&EventCallIncome()}2==r&&(g_callInfo.startCallTime=new Date),0==r&&(g_callInfo.endCallTime=new Date)}}UpdateAgentList(),"function"==typeof EventOtherAgentStatusChange&&EventOtherAgentStatusChange();break;case"GetLineInfo":for(n=u.data,g=0;g<n.length;g++){l=n[g].uPhoneExt,o=n[g].uMethod,a=n[g].AgentState,c=n[g].uID,0==n[g].Status&&(a=1),r=n[g].CallState;var I=n[g].uName,h=n[g].isDND,S=new Date(n[g].StateChangeTime),A=n[g].uPicture;if(g_callInfo.AgentListArr){for(var _=!1,C=0;C<g_callInfo.AgentListArr.length;C++)g_callInfo.AgentListArr[C].uID==c&&(_=!0,g_callInfo.AgentListArr[C].phoneState=o,g_callInfo.AgentListArr[C].agentState=a,g_callInfo.AgentListArr[C].callState=r,g_callInfo.AgentListArr[C].StateChangeTime=S,void 0!==c&&(g_callInfo.AgentListArr[C].uID=c,g_callInfo.AgentListArr[C].uPicture=A,g_callInfo.AgentListArr[C].agentName=I,g_callInfo.AgentListArr[C].phoneExt=l));0==_&&g_callInfo.AgentListArr.push({phoneExt:l,phoneState:o,agentState:a,callState:r,agentName:I,StateChangeTime:S,uID:c,uPicture:A})}e3decrypt(g_callInfo.uPhoneExt)==l&&AgentStatusChange(o,h,a,r)}UpdateAgentList();break;case"AgentAppStatusChanged":for(n=u.data,g=0;g<n.length;g++){l=n[g].uPhoneExt,o=n[g].uMethod,a=n[g].AgentState,0==n[g].Status&&(a=1),c=n[g].uID,r=n[g].CallState;var I=n[g].uName,h=n[g].isDND,S=new Date(n[g].StateChangeTime);if(g_callInfo.AgentListArr){for(var _=!1,C=0;C<g_callInfo.AgentListArr.length;C++)g_callInfo.AgentListArr[C].uID==c&&(_=!0,g_callInfo.AgentListArr[C].phoneState=o,g_callInfo.AgentListArr[C].agentState=a,g_callInfo.AgentListArr[C].callState=r,g_callInfo.AgentListArr[C].StateChangeTime=S,void 0!==c&&(g_callInfo.AgentListArr[C].uID=c,g_callInfo.AgentListArr[C].agentName=I,g_callInfo.AgentListArr[C].phoneExt=l));0==_&&g_callInfo.AgentListArr.push({phoneExt:l,phoneState:o,agentState:a,callState:r,agentName:I,uID:c,StateChangeTime:S})}e3decrypt(g_callInfo.uPhoneExt)==l&&AgentStatusChange(o,h,a,r)}UpdateAgentList(),"function"==typeof EventOtherAgentStatusChange&&EventOtherAgentStatusChange();break;case"SendNotice":if(n=u.data,i=u.result)for(g=0;g<n.length;g++)EventNotice(n[g]);break;case"SendMSG":if(n=u.data,i=u.result,1==i)for(g=0;g<n.length;g++)n[g].receiver==e3decrypt(g_callInfo.uPhoneExt)&&EventMSG(n[g]);break;case"IVRQueChanged":for(n=u.data,DebugMessage("IVRQueChanged",n),g=0;g<n.length;g++)n[g].site==e3decrypt(g_callInfo.uGroup)}}function ServerResponse(e,t){this.OPCode=e,this.Seq=t,this.Message="",this.Responsed=!1}function IncommingCallData(){this.strRemote="",this.strCid="",this.strDN="",this.strDnName="",this.sUType="",this.strCTIData="",this.url="",this.strOrgANI="",this.strOrgDNIS="",this.strSkill="",this.strLastAgent="",this.strDisplayName="",this.strOutCome=""}function SendDataBySocket(e){return g_callInfo.ConnFlag?(g_callInfo.PkgSeq++,void g_callInfo.webSck.send(e)):void KeepConnectSend()}function LoginInit(e,t,n,o,l,a,r){g_callInfo.uGroup=e,g_callInfo.uPhoneIP=t,g_callInfo.uPhoneID=n,g_callInfo.uPhonePWD=o,g_callInfo.uPhoneExt=l,g_callInfo.uPWD=a,g_callInfo.uID=r,g_callInfo.PkgSeq++;var i=getSendDataWebSocketForLogin(g_callInfo.uPhoneExt,g_callInfo.uPWD,g_callInfo.uGroup,g_callInfo.uID);g_callInfo.WaitResponse=new ServerResponse("4001",""+g_callInfo.PkgSeq),g_callInfo.webSck.send(i),g_callInfo.CheckCnt=0,CheckLoginInitResult()}function getSendDataWebSocketForLogin(e,t,n,o){var l={method:"Login",user_id:o,user_pwd:t,site:n,phone_ext:e},a=JSON.stringify(l);return a}function KeepConnect(){g_callInfo.ConnFlag&&KeepConnectSend(),setTimeout(function(){KeepConnect()},3e4)}function KeepConnectSend(){g_callInfo.PkgSeq++;var e="\n";g_callInfo.webSck.send(e)}function CheckLoginInitResult(){if(g_callInfo.WaitResponse.Responsed);else{if(g_callInfo.CheckCnt++,g_callInfo.CheckCnt>50)return g_callInfo.NormalClose=!0,g_callInfo.DestroyFlag=!0,"function"==typeof EventLoginFailed&&EventLoginFailed(),void setTimeout(function(){g_callInfo.webSck=null},300);setTimeout(function(){CheckLoginInitResult()},100)}}function Logout(){g_callInfo.NormalClose=!0,g_callInfo.DestroyFlag=!0,g_callInfo.webSck.close(),setTimeout(function(){g_callInfo.webSck=null},300)}function SetAgentStatus(e){g_callInfo.PkgSeq++;var t={method:"SetAgentStatus",status:e,ext:g_callInfo.uPhoneExt,user_id:g_callInfo.uID,phone_ip:g_callInfo.uPhoneIP,site:g_callInfo.uGroup},n=JSON.stringify(t);g_callInfo.webSck.send(n)}function MakeCall(e){if(g_callInfo.IncommingCallInfo=null,g_callInfo.CurrCallType=1,g_callInfo.CurrentCID="",g_callInfo.RemoteNumber="",g_callInfo.CurrentDNName="",g_callInfo.CallNumber=e,g_callInfo.RemoteNumber=g_callInfo.CallNumber,9==g_callInfo.RemoteNumber.substr(0,1)&&(g_callInfo.RemoteNumber=g_callInfo.RemoteNumber.substr(1,g_callInfo.RemoteNumber.length-1)),DataValidation()){var t=getURLMakeOutgoingCall(g_callInfo.CallNumber);1==mUSE_SERVER_ACTION?SendActionURL(t,""):$("#controlFrame").attr("src",t)}}function MakeBTrans(e){if(g_callInfo.MakeTwoCall=!0,DataValidation()){var t=getURLMakeBTrans(e);1==mUSE_SERVER_ACTION?SendActionURL(t,""):$("#controlFrame").attr("src",t)}}function MakeATrans(e){if(g_callInfo.MakeTwoCall=!0,DataValidation()){var t=getURLMakeATrans(e);1==mUSE_SERVER_ACTION?SendActionURL(t,""):$("#controlFrame").attr("src",t)}}function Make2ndCall(e){var t,n="F_TRANSFER";for(t=0;t<e.length;t++)n+="|"+e.substr(t,1);n+="|POUND";var o=n.split("|");if(g_callInfo.MakeTwoCall=!0,DataValidation()){var l=getURLMakeKeyCommand(o[0]);o.splice(0,1);var a="";for(t=0;t<o.length;t++)0!=t&&(a+="|"),a+=o[t];1==mUSE_SERVER_ACTION?SendActionURL(l,a):($("#controlFrame").prop("Other",a),$("#controlFrame").attr("src",l))}}function Merge2ndCall(e){var t,n="";switch(e){case 1:n="F_TRANSFER",g_callInfo.MakeTwoCall=!1;break;case 4:n=1==g_callInfo.TwoCallConnected?"CALLEND|F_HOLD":"F_HOLD",g_callInfo.MakeTwoCall=!1,g_callInfo.TwoCallConnected=!1}if(""!=n){var o=n.split("|");if(DataValidation()){var l=getURLMakeKeyCommand(o[0]);o.splice(0,1);var a="";for(t=0;t<o.length;t++)0!=t&&(a+="|"),a+=o[t];1==mUSE_SERVER_ACTION?SendActionURL(l,a):($("#controlFrame").prop("Other",a),$("#controlFrame").prop("src",l))}}}function SetCallState(e){if(DataValidation()){var t="";switch(e){case 0:t=getURLMakeKeyCommand("ANSWER");break;case 1:t=getURLMakeKeyCommand("F_HOLD");break;case 2:t=getURLMakeKeyCommand("CALLEND");break;case 4:t=getURLMakeKeyCommand("MUTE")}""!=t&&(1==mUSE_SERVER_ACTION?SendActionURL(t,""):$("#controlFrame").prop("src",t))}}function SendDTMF(e){if(DataValidation()){var t="";switch(e){case"#":t=getURLMakeKeyCommand("POUND");break;case"*":t=getURLMakeKeyCommand("STAR");break;default:t=getURLMakeKeyCommand(e)}""!=t&&(1==mUSE_SERVER_ACTION?SendActionURL(t,""):$("#controlFrame").prop("src",t))}}function DataValidation(){return""!=g_callInfo.uPhoneID&&""!=g_callInfo.uPhonePWD&&""!=g_callInfo.uPhoneIP}function getURLMakeKeyCommand(e){var t="http://"+g_callInfo.uPhoneID+":"+g_callInfo.uPhonePWD+"@"+g_callInfo.uPhoneIP+"/cgi-bin/ConfigManApp.com",n="key="+e;return t+"?"+n}function getURLMakeOutgoingCall(e){var t="http://"+g_callInfo.uPhoneID+":"+encodeURL(g_callInfo.uPhonePWD)+"@"+g_callInfo.uPhoneIP+"/cgi-bin/ConfigManApp.com",n=encodeURL(g_callInfo.uPhoneExt+"@"+g_callInfo.ACDSvr);return t+"?number="+e+"&outgoing_uri="+n}function getURLMakeBTrans(e){var t="http://"+g_callInfo.uPhoneID+":"+g_callInfo.uPhonePWD+"@"+g_callInfo.uPhoneIP+"/cgi-bin/ConfigManApp.com";g_callInfo.uPhoneExt+"@"+g_callInfo.ACDSvr;return t+"?key=BTrans="+e}function getURLMakeATrans(e){var t="http://"+g_callInfo.uPhoneID+":"+g_callInfo.uPhonePWD+"@"+g_callInfo.uPhoneIP+"/cgi-bin/ConfigManApp.com";g_callInfo.uPhoneExt+"@"+g_callInfo.ACDSvr;return t+"?key=ATrans="+e}function AgentStatusChange(e,t,n,o){g_callInfo.agentState;g_callInfo.agentState=n,5==n?(g_callInfo.MakeTwoCall=!1,g_callInfo.TwoCallConnected=!1):4==n&&1==g_callInfo.MakeTwoCall&&(0==o?g_callInfo.TwoCallConnected=!1:2==o&&(g_callInfo.TwoCallConnected=!0)),g_callInfo.fromDate=new Date,"function"==typeof EventAgentStatusChange&&EventAgentStatusChange()}function UpdateAgentList(){var e=0;for(e=0;e<g_callInfo.AgentListArr.length;e++){var t=GetStateName(g_callInfo.AgentListArr[e].agentState);g_callInfo.AgentListArr[e].agentStateName=t.stateName,g_callInfo.AgentListArr[e].agentStateColor=t.stateColor}}function SendNotice(e){var t={method:"SendNotice",site:g_callInfo.uGroup,data:[{senderID:g_callInfo.uID,senderName:g_callInfo.uID,msg:e,sTime:E3Utils.getCurrentTimeOnlyString(),from:g_callInfo.uPhoneExt}]},n=JSON.stringify(t),o=n;g_callInfo.webSck.send(o)}function SendMsg(e,t){var n={method:"SendMSG",receiver:e,data:[{receiver:e,senderID:g_callInfo.uID,senderName:g_callInfo.uID,msg:t,sTime:E3Utils.getCurrentTimeOnlyString(),from:g_callInfo.uPhoneExt}]},o=JSON.stringify(n),l=o;g_callInfo.webSck.send(l)}function SendActionURL(e,t){var n=g_callInfo.uPhoneIP,o=g_callInfo.uPhoneID+":"+g_callInfo.uPhonePWD,l=e.replace("http://"+g_callInfo.uPhoneID+":"+g_callInfo.uPhonePWD+"@"+g_callInfo.uPhoneIP,""),a={method:"CallActionURL",host:n,path:l,other:t,auth:o},r=JSON.stringify(a),i=r;g_callInfo.webSck.send(i)}window.JSON&&(window._JSON=window.JSON),window.JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(){var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)},n={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},o=function(e){return n[e]||"\\u"+(e.charCodeAt(0)+65536).toString(16).substr(1)},l=/[\\"\u0000-\u001F\u2028\u2029]/g;return function a(n){if(null==n)return"null";if("number"==typeof n)return isFinite(n)?n.toString():"null";if("boolean"==typeof n)return n.toString();if("object"==typeof n){if("function"==typeof n.toJSON)return a(n.toJSON());if(t(n)){for(var r="[",i=0;i<n.length;i++)r+=(i?", ":"")+a(n[i]);return r+"]"}if("[object Object]"===e.call(n)){var c=[];for(var g in n)n.hasOwnProperty(g)&&c.push(a(g)+": "+a(n[g]));return"{"+c.join(", ")+"}"}}return'"'+n.toString().replace(l,o)+'"'}}()},WEB_SOCKET_SWF_LOCATION="WebSocketMain.swf",WEB_SOCKET_FORCE_FLASH=!0,WEB_SOCKET_LOGGER=null,WEB_SOCKET_DEBUG=!0,WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!1,WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR=!1,mUSE_SERVER_ACTION=!0;var objTimerSetReady=null,g_callInfo=new function(){this.fromDate=new Date,this.level=0,this.autoConnect=!1,this.CurrMenu="Phone",this.ACDSvr="e3sample.e3ts.co.kr",this.ACDPort="9411",this.uPhoneIP="",this.uPhoneExt="",this.uPhoneID="admin",this.uPhonePWD="",this.AgentList=null,this.sfpt=null,this.CurrentCallState=0,this.CurrentAgentState=0,this.CurrChat="",this.CurrCont="URL",this.DNArr=null,this.QUEArr=null,this.CurrURLIdx=-1,this.MaxURL=30,this.URLAction="",this.SelectedURLTR=null,this.SelectedCHTR=null,this.OriDisp="",this.OriUrl="",this.CurrURLWindow="",this.CurrCallType=3,this.CallDuration=0,this.CallTime="",this.pt=null,this.pt1=null,this.pt2=null,this.HoldingCall=!1,this.MutingCall=!1,this.CallHistory="",this.CallHistoryCnt=30,this.CallHistoryArr=new Array(this.CallHistoryCnt),this.RemoteNumber="",this.AgentRole="0",this.URLSeq=0,this.CurrPerfWindow=0,this.SelectedExt="",this.SelectedAgentState="",this.TwoCallConnected=!1,this.MakeTwoCall=!1,this.TwoCallFlag=0,this.CurrAct="",this.SoftPhoneResult=-1,this.AgentListHeight=0,this.DestroyFlag=!1,this.WrapupCode="",this.WrapupCodeArr=null,this.CurrentDNName="",this.NormalClose=!1,this.DefaultWrapupCode="",this.webSck=null,this.WaitResponse=null,this.ConnFlag=!1,this.CheckCnt=0,this.PkgSeq=0,this.AgentStateList="",this.StartUpURL="",this.AgentDNList="",this.CurrentCID="",this.CurrentBID="",this.CurrentUserType=0,this.CallNumber="",this.IncommingCallInfo=null,this.AgentSkill="",this.TransNumber="",this.CallTransfered=!1,this.LastAgent="",this.LoginResult=-1,this.LoginError=0,this.MsgStr="",this.SendMessageType="",this.GetAgentFlag=!1,this.AgentListStr="",this.AgentListArr=[],this.startCallTime="",this.endCallTime="",this.uID="",this.uGroup="",this.uLevel="",this.init=function(){DebugMessage("init running..."),this.autoConnect=!1,InitialSocket()},this.destroy=function(){DestroySocket()},this.makeCall=function(e){return-1==this.LoginResult?void("function"==typeof EventError&&EventError(0)):void MakeCall(e)},this.makeBTrans=function(e){return-1==this.LoginResult?void("function"==typeof EventError&&EventError(0)):void MakeBTrans(e)},this.makeATrans=function(e){return-1==this.LoginResult?void("function"==typeof EventError&&EventError(0)):void MakeATrans(e)},this.merge2ndCall=function(e){return-1==this.LoginResult?void("function"==typeof EventError&&EventError(0)):void Merge2ndCall(e)},this.make2ndCall=function(e){return-1==this.LoginResult?void("function"==typeof EventError&&EventError(0)):void Make2ndCall(e)},this.sendDTMF=function(e){return-1==this.LoginResult?void("function"==typeof EventError&&EventError(0)):void SendDTMF(e)},this.sendNotice=function(e){return-1==this.LoginResult?void("function"==typeof EventError&&EventError(0)):void SendNotice(e)},this.sendChat=function(e,t){return-1==this.LoginResult?void("function"==typeof EventError&&EventError(0)):void SendMsg(e,t)},this.setAgentState=function(e){if(-1==this.LoginResult)return void("function"==typeof EventError&&EventError(0));Number(e);if(3==e||300==e){null!=this.IncommingCallInfo&&(this.IncommingCallInfo=null),this.CurrCallType=3,this.CurrentCID="",this.RemoteNumber="",this.CurrentDNName="";for(var t=document.getElementsByTagName("iframe"),n=0;n<t.length;n++)t[n].src.substr(0,20)==document.URL.substr(0,20)&&t[n].contentWindow.ClearCustomerInfo&&t[n].contentWindow.ClearCustomerInfo()}SetAgentStatus(e);try{300==e&&setTimeout(function(){4!=parseInt(g_callInfo.agentState,10)&&SetAgentStatus(300)},1e3)}catch(o){DebugMessage(o)}},this.loginInit=function(e,t,n,o,l,a,r){return(void 0==r||""==r)&&(r=l),(void 0==a||""==a)&&(a="ob"+l+"0000@!"),0==this.ConnFlag?(this.autoConnect=!0,this.uGroup=e,this.uPhoneIP=t,this.uPhoneID=n,this.uPhonePWD=o,this.uPhoneExt=l,this.uPWD=a,this.uID=r,void InitialSocket()):void LoginInit(e,t,n,o,l,a,r)},this.setCallState=function(e){return-1==this.LoginResult?void("function"==typeof EventError&&EventError(0)):void SetCallState(e)}},E3Utils=new function(){this.getCurrentTimeOnlyString=function(){var e=new Date;e=new Date((new Date).getTime());var t="";return t+=e.getHours()>9?e.getHours():"0"+e.getHours(),t+=":",t+=e.getMinutes()>9?e.getMinutes():"0"+e.getMinutes(),t+=":",t+=e.getSeconds()>9?e.getSeconds():"0"+e.getSeconds()}};